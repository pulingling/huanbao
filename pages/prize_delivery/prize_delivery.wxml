<!--pages/prize_delivery/prize_delivery.wxml-->
<view class="delivery-container" wx:if="{{loading}}">

</view>

<view class="delivery-container" wx:else>

  <view wx:if="{{prizeInfo == null}}" class="section-title history a-center">
    <image class="ico-null" src="https://sthjxjzx-cjhb.oss-accelerate.aliyuncs.com/wx-app/credit-center/noprize.png" mode="widthFix"></image>
    <view wx:if="{{from == 'rank'}}">
        <view wx:if="{{today < 1126}}">
          <text>活动火热进行中</text>
          <text>最终排名将于11月26日揭晓～</text>
          <text>快去多攒积分</text><text>向TOP50冲刺吧！</text>
        </view>
        <view wx:else>
          <text>✨ 给你一个大大的赞！</text>
          <text>挑战虽然结束</text>
          <text>但你的绿色学习之旅超酷的</text>
          <text>这次名次有限</text>
          <text>但你的环保行动无限！</text>
          <text>精彩不停歇</text>
          <text>你积累的积分长期有效</text>
          <text>仍可随时参与平台抽奖！</text>
          <text>学习的每一步都算数</text>
          <text>环保的每一程都光荣</text>
          <text>我们下一站再见！</text>
        </view>
    </view>
    <view wx:else>
        <text>哎呀，宝藏偷偷溜走啦~</text>
        <text>但你攒的每一分</text>
        <text>都藏着实打实的环保能量</text>
        <text>继续学习，攒足积分</text>
        <text>我们下次再战！</text>
    </view>
    

  </view>
  <view wx:else>
  <!-- 表单区域 -->
  <view class="section-title history">
    <text>嘎嘎~，你的运气真好！</text>
    <text>{{prizeInfo.day}}, 你成功解锁了「{{prizeInfo.prize_name}}」</text>
    <text>这份「{{prizeInfo.prize_name}}」请收下吧！</text>
  </view>
  <view class="form-container">
    <!-- 收货人信息 --><image class="ico-bear" src="https://sthjxjzx-cjhb.oss-cn-chengdu.aliyuncs.com/images/new/ico-br.png" mode="widthFix"></image>
    <view class="form-section"> 
        <text class="section-title">请填写收货人信息</text>     
      <view class="form-item">
        <text class="item-label">收货人姓名</text>
        <input 
          class="item-input" 
          type="text" 
          placeholder="请输入收货人姓名"
          placeholder-class="placeholder"
          value="{{name}}"
          bindinput="onNameInput"
        />
      </view>


      <view class="form-item">
        <text class="item-label">电话号码</text>
        <input 
          class="item-input" 
          type="number" 
          placeholder="请输入手机号码"
          placeholder-class="placeholder"
          value="{{phone}}"
          bindinput="onPhoneInput"
          maxlength="11"
        />
      </view>

      
      <view class="form-item" wx:if="{{prizeInfo.prize_type == 2}}">
        <text class="item-label">邮箱地址</text>
        <input 
          class="item-input" 
          type="text" 
          placeholder="邮箱地址"
          placeholder-class="placeholder"
          value="{{email}}"
          bindinput="onEmailInput"
        />
      </view>
    </view>

    <!-- 收货地址 -->
    <view class="form-section" wx:if="{{prizeInfo.prize_type == 0}}">
      <text class="section-title">收货地址</text>
      
      <view class="form-item">
        <text class="item-label">所在地区</text>
        <picker 
          class="region-picker" 
          mode="region" 
          value="{{region}}" 
          bindchange="onRegionChange"
        >
          <view class="picker-view">
            <text class="picker-text" wx:if="{{region[0]}}">{{region[0]}} {{region[1]}} {{region[2]}}</text>
            <text class="picker-placeholder" wx:else>请选择省市区</text>
          </view>
        </picker>
        <text class="picker-arrow">›</text>
      </view>

      <view class="form-item">
        <text class="item-label">详细地址</text>
        <textarea 
          class="item-textarea" 
          placeholder="请输入详细地址（街道、门牌号等）"
          placeholder-class="placeholder"
          value="{{detailAddress}}"
          bindinput="onDetailAddressInput"
          maxlength="200"
        />
      </view>
    </view>

   
  </view>

  <!-- 提交按钮 -->
  <view class="submit-btn-container">
    <button 
      class="submit-btn" 
      bindtap="onSubmit"
    >
      提交信息
    </button>
  </view>

  <!-- 提交成功弹窗 -->
  <view class="success-modal" wx:if="{{showSuccess}}">
    <view class="modal-content">
      <view class="modal-icon">✓</view>
      <text class="modal-title">提交成功！</text>
      <text class="modal-desc">您的收货信息已提交，奖品将在7个工作日内寄出</text>
      <button class="modal-btn" bindtap="closeSuccess">确定</button>
    </view>
  </view>
</view>
</view>